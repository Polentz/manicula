<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manicula | Pistoia</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,200;0,300;0,400;0,500;1,200;1,300;1,400;1,500&family=Oswald:wght@300;400&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <nav class="nav">
        <ul class="nav__wrapper">
            <li>Pistoia</li>
            <li class="nav__link" id="info--btn">Info</li>
            <li class="nav__link"><a href="index.html">Back</a></li>
        </ul>
    </nav>
    <nav class="nav--pages">
        <img src="assets/uploads/manicula-enrico.svg" id="manicula-e--btn">
        <img src="assets/uploads/manicula-chiara.svg" id="manicula-c--btn">
    </nav>
    <main class="content --fix-height">
        <div class="ui-btn" id="enlarge">
            <img src="assets/ui/enlarge.svg">
        </div>
        <div class="ui-btn" id="close">
            <img src="assets/ui/close.svg">
        </div>
        <div class="ui-btn" id="next">
            <img src="assets/ui/next.svg">
        </div>
        <section class="content__main">
            <div class="content__main--bookmark">
                <div class="bookmark__copy">
                    <p>Hand clapping it is also used to teach phonological awareness to students learning the ways words
                        are constructed. They often clap out syllables to learn to break words into their component
                        sounds.</p>
                </div>
                <div class="bookmark__copy">
                    <p>Lievemente sprofondato nella sabbia, lavandomi il volto nell'acqua della Brana, raccolgo una
                        piccola struttura, rigida e dura, con un incavo traslucido, come fosse una conchiglia. La tengo
                        nel palmo, bagnato, e alzando il braccio rivolgo la parola a Chiara; il nostro discorso è
                        disimpegnato, e la superficie alle sue spalle, un muro, entra in risonanza con le parole che
                        contengono molte "a", mentre si sgretola in terra ocra.</p>
                </div>
                <div class="bookmark__copy">
                    <p>ore 21:37</p>
                    <p>6 gradi centigradi circa</p>
                </div>
                <div class="bookmark__copy">
                    <p>Il percorso lungo il torrente Brana fiancheggia un imponente muro di pietre e dall'altra sponda
                        una ripetizione continua, ritmica, di edifici di edilizia popolare.</p>
                </div>
                <!-- extra text repeated -->
                <div class="bookmark__copy">
                    <p>Hand clapping it is also used to teach phonological awareness to students learning the ways words
                        are constructed. They often clap out syllables to learn to break words into their component
                        sounds.</p>
                </div>
                <div class="bookmark__copy">
                    <p>Lievemente sprofondato nella sabbia, lavandomi il volto nell'acqua della Brana, raccolgo una
                        piccola struttura, rigida e dura, con un incavo traslucido, come fosse una conchiglia. La tengo
                        nel palmo, bagnato, e alzando il braccio rivolgo la parola a Chiara; il nostro discorso è
                        disimpegnato, e la superficie alle sue spalle, un muro, entra in risonanza con le parole che
                        contengono molte "a", mentre si sgretola in terra ocra.</p>
                </div>
                <div class="bookmark__copy">
                    <p>ore 21:37</p>
                    <p>6 gradi centigradi circa</p>
                </div>
                <div class="bookmark__copy">
                    <p>Il percorso lungo il torrente Brana fiancheggia un imponente muro di pietre e dall'altra sponda
                        una ripetizione continua, ritmica, di edifici di edilizia popolare.</p>
                </div>
            </div>
            <div class="content__main--table">
                <div class="table__wrapper">
                    <img src="assets/uploads/manicula-test01.jpg">
                    <img src="assets/uploads/manicula-test02.jpg">
                    <img src="assets/uploads/manicula-test03.jpg">
                    <img src="assets/uploads/manicula-test04.jpg">
                    <img src="assets/uploads/manicula-test05.jpg">
                </div>
            </div>
        </section>

        <section class="content__info" id="info--block">
            <div class="ui-btn" id="info--close">
                <img src="assets/ui/arrow-left.svg">
            </div>
            <div class="content__copy--main">
                <p>Qui si trovano le informazioni sui luoghi e gli enti ospitanti.</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Nibh cras pulvinar mattis nunc sed blandit. Enim diam vulputate ut pharetra
                    sit.</p>
            </div>
            <div class="content__copy--small">
                <p>Qui si trovano le informazioni sui luoghi e gli enti ospitanti.</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Nibh cras pulvinar mattis nunc sed blandit. Enim diam vulputate ut pharetra
                    sit.</p>
            </div>
            <div class="content__copy--images">
                <img src="assets/uploads/manicula-chiara-framed.svg">
                <img src="assets/uploads/manicula-chiara-framed.svg">
            </div>
        </section>

        <section class="content__info" id="manicula-e--block">
            <div class="ui-btn" id="manicula-e--close">
                <img src="assets/ui/arrow-down.svg">
            </div>
            <div class="content__copy--main">
                <p>Hand Clapping<br>
                    around the symbol and listen<br>
                    to the acoustic phenomena that emerges from the energy created by your hands</p>
                <p>Eco<br>
                    Reverberation</p>
                <p>appears and decay in different configurations<br>
                    embedded in the background noise of the city.</p>
                <p>Stay still, or keep walking.</p>
            </div>
        </section>

        <section class="content__info" id="manicula-c--block">
            <div class="ui-btn" id="manicula-c--close">
                <img src="assets/ui/arrow-up.svg">
            </div>
            <div class="content__copy--main">
                <p>Qui si trova la descrizione del simbolo di Chiara</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua.</p>
                <p>Nibh cras pulvinar mattis nunc sed blandit.</p>
            </div>
        </section>
    </main>
    <script>
        const object = document.querySelector(".content__main--bookmark");
        const overlay = document.querySelectorAll(".nav--pages");
        const btnEnlarge = document.getElementById("enlarge");
        const btnClose = document.getElementById("close");
        const content = document.querySelector(".content__main");
        const nav = document.querySelectorAll(".nav--pages, .nav");
        const btnNext = document.getElementById("next");
        const scrollContainer = document.querySelector(".table__wrapper");

        object.addEventListener("mouseenter", () => {
            if (content.classList.contains("enlarge")) {
                return false
            } else {
                overlay.forEach(element => {
                    element.classList.add("behind");
                });
            }
        })

        object.addEventListener("mouseleave", () => {
            overlay.forEach(element => {
                element.classList.remove("behind");
            });
        });

        btnEnlarge.addEventListener("click", () => {
            nav.forEach(n => {
                n.style.opacity = "0";
                n.style.pointerEvents = "none";
            });
            btnEnlarge.classList.add("hide");
            setTimeout(() => {
                content.classList.add("enlarge");
                btnClose.classList.add("visible");
                scrollContainer.scrollLeft = 0;
            }, 300);
        })

        btnClose.addEventListener("click", () => {
            content.classList.remove("enlarge");
            btnClose.classList.remove("visible");
            setTimeout(() => {
                nav.forEach(n => {
                    n.style.opacity = "1";
                    n.style.pointerEvents = "all";
                });
                btnEnlarge.classList.remove("hide");
                scrollContainer.scrollLeft = 0;
            }, 300);
        });

        btnNext.addEventListener("click", () => {
            let responsiveDistance = content.innerWidth || content.clientWidth;
            console.log(responsiveDistance);
            scrollContainer.scrollBy({
                left: responsiveDistance,
                behavior: "instant"
            });
        });

        openOnClick("info--btn", "info--block", "slide-in");
        openOnClick("manicula-e--btn", "manicula-e--block", "slide-in");
        openOnClick("manicula-c--btn", "manicula-c--block", "slide-in");

        closeOnClick("info--close", "info--block", "slide-in");
        closeOnClick("manicula-e--close", "manicula-e--block", "slide-in");
        closeOnClick("manicula-c--close", "manicula-c--block", "slide-in");

        closeAll(".nav, .nav--pages", ".content__info", "slide-in");

        function openOnClick(trigger, section, className) {
            document.getElementById(trigger).addEventListener("click", (event) => {
                document.getElementById(section).classList.toggle(className);
                event.stopPropagation();
            })
        }

        function closeOnClick(trigger, section, className) {
            document.getElementById(trigger).addEventListener("click", (event) => {
                document.getElementById(section).classList.remove(className);
                event.stopPropagation();
            })
        }

        function closeAll(trigger, sections, className) {
            const navTags = document.querySelectorAll(trigger);
            navTags.forEach(navTag => {
                navTag.addEventListener("click", (event) => {
                    const allInfos = document.querySelectorAll(sections);
                    allInfos.forEach(info => {
                        if (info.classList.contains(className)) {
                            info.classList.remove(className);
                            event.stopPropagation();
                        }
                    });
                });
            })
        }
    </script>
</body>

</html>